# 数据治理测试规范

> 功能数: 112 | 模块数: 8
> 领域: 三、数据治理

本文档定义数据治理领域所有功能的测试规范，包含元数据管理、数据血缘、数据质量管理、敏感数据管理、数据标准管理、数据资产管理、特征存储、数据集管理八个模块。

---

## 目录

- [3.1 元数据管理 (META)](#31-元数据管理-meta)
- [3.2 数据血缘 (LIN)](#32-数据血缘-lin)
- [3.3 数据质量管理 (QUA)](#33-数据质量管理-qua)
- [3.4 敏感数据管理 (SEN)](#34-敏感数据管理-sen)
- [3.5 数据标准管理 (STD)](#35-数据标准管理-std)
- [3.6 数据资产管理 (AST)](#36-数据资产管理-ast)
- [3.7 特征存储 (FEA)](#37-特征存储-fea)
- [3.8 数据集管理 (DST)](#38-数据集管理-dst)

---

## 3.1 元数据管理 (META)

**后端代码**: `services/data-api/models/metadata.py`, `services/data-api/models/metadata_version.py`
**前端代码**: `web/src/pages/metadata/MetadataPage.tsx`

### META-001 数据库浏览

**实现目标**: 树形浏览数据库列表，展示数据源下的所有数据库

**测试步骤**:
1. 进入元数据管理页面
2. 验证左侧显示数据源树形结构
3. 展开某个数据源节点
4. 验证显示该数据源下的数据库列表
5. 验证数据库图标和名称正确
6. 测试大量数据库时的加载性能

**成功条件**:
- 树形结构正确展示
- 数据库列表完整
- 图标和名称正确
- 加载性能可接受

**失败条件**:
- 树形结构不显示
- 数据库列表不完整
- 图标或名称错误
- 加载太慢

---

### META-002 表浏览

**实现目标**: 浏览数据库中的表列表

**测试步骤**:
1. 在数据库树中选择一个数据库
2. 验证显示该数据库下的表列表
3. 验证显示表名、行数、大小等信息
4. 测试表搜索功能
5. 测试表排序功能

**成功条件**:
- 表列表完整显示
- 表信息准确
- 搜索功能正常
- 排序功能正常

**失败条件**:
- 表列表不完整
- 表信息不准确
- 搜索不工作
- 排序不工作

---

### META-003 字段浏览

**实现目标**: 查看表的字段定义，包括字段名、类型、注释等

**测试步骤**:
1. 在表列表中选择一个表
2. 查看字段列表
3. 验证显示字段名、数据类型
4. 验证显示字段注释
5. 验证显示是否为主键/索引
6. 验证显示是否可空

**成功条件**:
- 字段列表完整
- 数据类型正确
- 注释显示正确
- 约束信息正确

**失败条件**:
- 字段列表不完整
- 数据类型错误
- 注释不显示
- 约束信息错误

---

### META-004 表描述编辑

**实现目标**: 编辑表的业务描述信息

**测试步骤**:
1. 选择一个表进入详情页
2. 点击编辑表描述
3. 输入业务描述文本
4. 保存描述
5. 刷新页面验证保存成功
6. 测试描述修改

**成功条件**:
- 描述编辑保存成功
- 刷新后描述保留
- 支持中文描述
- 支持多次修改

**失败条件**:
- 描述保存失败
- 刷新后描述丢失
- 中文乱码
- 修改不生效

---

### META-005 字段描述编辑

**实现目标**: 编辑字段的业务描述信息

**测试步骤**:
1. 选择一个表查看字段列表
2. 点击某个字段的编辑按钮
3. 输入字段业务描述
4. 保存描述
5. 验证描述更新
6. 批量编辑多个字段描述

**成功条件**:
- 字段描述保存成功
- 描述正确显示
- 支持批量编辑
- 历史修改可追溯

**失败条件**:
- 描述保存失败
- 描述不显示
- 批量编辑失败
- 无修改历史

---

### META-006 AI 智能标注

**实现目标**: AI 自动分析字段名称和数据样本，生成字段描述

**测试步骤**:
1. 选择一个表
2. 点击"AI 智能标注"按钮
3. 等待 AI 分析完成
4. 查看 AI 生成的字段描述
5. 评估描述质量
6. 接受或修改 AI 生成的描述

**成功条件**:
- AI 标注功能可用
- 生成描述质量合理
- 可接受或修改
- 批量处理支持

**失败条件**:
- AI 标注不可用
- 生成描述不合理
- 无法修改
- 批量处理失败

---

### META-007 语义标签管理

**实现目标**: 为字段添加语义标签，便于分类和搜索

**测试步骤**:
1. 选择字段添加标签
2. 从预定义标签列表选择
3. 创建自定义标签
4. 保存标签
5. 按标签搜索字段
6. 删除标签

**成功条件**:
- 标签添加成功
- 预定义标签可选
- 自定义标签支持
- 标签搜索正常

**失败条件**:
- 标签添加失败
- 预定义标签不可选
- 自定义标签不支持
- 标签搜索失败

---

### META-008 敏感级别标注

**实现目标**: 标注字段的敏感级别（public/internal/confidential/restricted）

**测试步骤**:
1. 选择字段设置敏感级别
2. 选择 public 级别，保存
3. 修改为 confidential 级别
4. 验证级别更新
5. 按敏感级别筛选字段
6. 查看敏感级别统计

**成功条件**:
- 敏感级别设置成功
- 支持所有级别
- 筛选功能正常
- 统计数据准确

**失败条件**:
- 设置失败
- 级别不完整
- 筛选不工作
- 统计不准确

---

### META-009 敏感类型标注

**实现目标**: 标注字段的敏感类型（pii/financial/health/credential）

**测试步骤**:
1. 选择字段设置敏感类型
2. 选择 pii 类型
3. 选择具体子类型（如 phone、email）
4. 保存设置
5. 按敏感类型筛选
6. 查看敏感类型分布

**成功条件**:
- 敏感类型设置成功
- 子类型选择正常
- 筛选功能正常
- 分布统计正确

**失败条件**:
- 设置失败
- 子类型不支持
- 筛选不工作
- 统计不准确

---

### META-010 元数据搜索

**实现目标**: 关键词搜索表和字段元数据

**测试步骤**:
1. 在搜索框输入关键词
2. 验证搜索表名匹配
3. 验证搜索字段名匹配
4. 验证搜索描述匹配
5. 测试模糊搜索
6. 测试高级搜索（组合条件）

**成功条件**:
- 搜索结果准确
- 表名匹配正确
- 字段名匹配正确
- 描述匹配正确
- 高级搜索支持

**失败条件**:
- 搜索结果不准确
- 匹配遗漏
- 描述不匹配
- 高级搜索不支持

---

### META-011 元数据同步

**实现目标**: 从数据源同步最新的元数据信息

**测试步骤**:
1. 选择一个数据源
2. 点击"同步元数据"
3. 验证同步进度显示
4. 等待同步完成
5. 验证新增表被同步
6. 验证字段变更被同步

**成功条件**:
- 同步成功执行
- 进度正确显示
- 新增内容同步
- 变更内容同步

**失败条件**:
- 同步执行失败
- 进度不显示
- 新增未同步
- 变更未同步

---

### META-012 元数据版本管理

**实现目标**: 记录元数据变更历史，支持版本追溯

**测试步骤**:
1. 修改表的描述
2. 查看元数据版本历史
3. 验证新版本生成
4. 验证记录变更内容
5. 验证记录变更时间和人员

**成功条件**:
- 版本历史正确记录
- 变更内容清晰
- 时间和人员准确
- 版本号递增

**失败条件**:
- 版本历史不记录
- 变更内容不清晰
- 时间人员不准确
- 版本号混乱

---

### META-013 版本对比

**实现目标**: 对比不同版本的元数据差异

**测试步骤**:
1. 进入版本历史页面
2. 选择两个版本进行对比
3. 验证显示新增内容
4. 验证显示删除内容
5. 验证显示修改内容
6. 测试字段级差异对比

**成功条件**:
- 版本对比功能可用
- 新增内容高亮
- 删除内容高亮
- 修改内容显示

**失败条件**:
- 对比功能不可用
- 差异显示不清晰
- 对比结果错误
- 字段级对比不支持

---

### META-014 版本回滚

**实现目标**: 回滚到历史版本的元数据状态

**测试步骤**:
1. 查看元数据版本历史
2. 选择一个历史版本
3. 点击"回滚到此版本"
4. 确认回滚操作
5. 验证元数据恢复到历史状态
6. 验证生成新的版本记录

**成功条件**:
- 回滚操作成功
- 元数据恢复正确
- 新版本记录生成
- 回滚可追溯

**失败条件**:
- 回滚操作失败
- 元数据未恢复
- 无新版本记录
- 回滚不可追溯

---

### META-015 元数据图谱

**实现目标**: 可视化展示元数据关系图

**测试步骤**:
1. 进入元数据图谱页面
2. 验证显示表之间的关系
3. 验证外键关系连线
4. 测试图谱缩放
5. 测试节点拖拽
6. 点击节点查看详情

**成功条件**:
- 图谱正确渲染
- 关系连线正确
- 缩放拖拽正常
- 节点详情可查看

**失败条件**:
- 图谱不渲染
- 关系连线错误
- 交互不正常
- 详情不可查看

---

## 3.2 数据血缘 (LIN)

**后端代码**: `services/data-api/models/lineage.py`, `services/data-api/models/lineage_event.py`
**前端代码**: `web/src/pages/data/lineage/LineagePage.tsx`

### LIN-001 血缘节点管理

**实现目标**: 创建、编辑、删除血缘图中的节点

**测试步骤**:
1. 进入血缘管理页面
2. 创建新的血缘节点
3. 设置节点类型（table/task/application）
4. 编辑节点属性
5. 删除节点
6. 验证关联边同时删除

**成功条件**:
- 节点创建成功
- 节点编辑成功
- 节点删除成功
- 关联边正确处理

**失败条件**:
- 节点创建失败
- 节点编辑失败
- 节点删除失败
- 关联边未处理

---

### LIN-002 血缘边管理

**实现目标**: 创建、编辑、删除血缘关系边

**测试步骤**:
1. 选择源节点和目标节点
2. 创建血缘边
3. 设置边的类型（直接/派生）
4. 编辑边的属性
5. 删除边
6. 验证边的方向正确

**成功条件**:
- 边创建成功
- 边类型正确
- 边编辑成功
- 边删除成功

**失败条件**:
- 边创建失败
- 边类型错误
- 边编辑失败
- 边删除失败

---

### LIN-003 血缘图可视化

**实现目标**: 可视化展示数据血缘关系图

**测试步骤**:
1. 进入血缘可视化页面
2. 验证节点正确显示
3. 验证边正确连接
4. 测试图谱缩放
5. 测试节点拖拽
6. 测试布局切换

**成功条件**:
- 血缘图正确渲染
- 节点和边显示正确
- 交互功能正常
- 布局切换正常

**失败条件**:
- 血缘图不渲染
- 节点或边显示错误
- 交互不正常
- 布局切换失败

---

### LIN-004 上游追溯

**实现目标**: 追溯数据的上游来源

**测试步骤**:
1. 选择一个目标表节点
2. 点击"上游追溯"
3. 验证显示直接上游节点
4. 展开查看间接上游
5. 验证追溯层级正确
6. 测试追溯深度限制

**成功条件**:
- 上游追溯成功
- 直接上游正确
- 间接上游正确
- 深度限制生效

**失败条件**:
- 上游追溯失败
- 上游信息错误
- 间接上游遗漏
- 深度无限制

---

### LIN-005 下游影响分析

**实现目标**: 分析数据变更对下游的影响范围

**测试步骤**:
1. 选择一个源表节点
2. 点击"下游影响分析"
3. 验证显示直接下游
4. 验证显示间接下游
5. 验证影响范围统计
6. 导出影响分析报告

**成功条件**:
- 下游分析成功
- 直接下游正确
- 间接下游正确
- 报告导出成功

**失败条件**:
- 下游分析失败
- 下游信息错误
- 范围统计不准
- 报告导出失败

---

### LIN-006 血缘快照

**实现目标**: 保存特定时间点的血缘图快照

**测试步骤**:
1. 在血缘图页面点击"保存快照"
2. 输入快照名称和描述
3. 保存快照
4. 查看快照列表
5. 加载历史快照
6. 对比不同快照

**成功条件**:
- 快照保存成功
- 快照列表显示
- 快照加载成功
- 快照对比可用

**失败条件**:
- 快照保存失败
- 快照列表不显示
- 快照加载失败
- 快照对比不可用

---

### LIN-007 血缘自动采集

**实现目标**: 从 ETL 任务自动采集血缘关系

**测试步骤**:
1. 执行一个 ETL 任务
2. 等待血缘自动采集
3. 验证源表节点创建
4. 验证目标表节点创建
5. 验证血缘边创建
6. 验证采集的转换逻辑

**成功条件**:
- 自动采集生效
- 节点正确创建
- 边正确创建
- 转换逻辑记录

**失败条件**:
- 自动采集不生效
- 节点创建失败
- 边创建失败
- 转换逻辑丢失

---

### LIN-008 OpenLineage 集成

**实现目标**: 支持 OpenLineage 标准事件接入

**测试步骤**:
1. 配置 OpenLineage 接收端点
2. 发送 OpenLineage 事件
3. 验证事件被接收
4. 验证血缘图更新
5. 测试多种事件类型
6. 验证事件元数据保存

**成功条件**:
- OpenLineage 端点可用
- 事件正确接收
- 血缘图自动更新
- 元数据正确保存

**失败条件**:
- 端点不可用
- 事件接收失败
- 血缘图不更新
- 元数据丢失

---

### LIN-009 列级血缘

**实现目标**: 支持字段级别的血缘追踪

**测试步骤**:
1. 查看表的字段列表
2. 选择某个字段
3. 查看字段的上游来源字段
4. 查看字段的下游目标字段
5. 验证字段级血缘边
6. 测试跨表字段追溯

**成功条件**:
- 字段级血缘可用
- 上游字段正确
- 下游字段正确
- 跨表追溯正常

**失败条件**:
- 字段级血缘不可用
- 上游字段错误
- 下游字段错误
- 跨表追溯失败

---

### LIN-010 转换逻辑记录

**实现目标**: 记录数据转换的 SQL 或业务逻辑

**测试步骤**:
1. 查看血缘边详情
2. 验证显示转换 SQL
3. 验证显示转换类型
4. 编辑转换逻辑说明
5. 查看转换历史
6. 导出转换文档

**成功条件**:
- 转换 SQL 正确显示
- 转换类型正确
- 逻辑说明可编辑
- 历史可查看

**失败条件**:
- 转换 SQL 不显示
- 转换类型错误
- 逻辑说明不可编辑
- 历史不可查看

---

## 3.3 数据质量管理 (QUA)

**后端代码**: `services/data-api/models/quality.py`
**前端代码**: `web/src/pages/data/quality/QualityPage.tsx`

### QUA-001 质量规则创建

**实现目标**: 创建数据质量检查规则

**测试步骤**:
1. 进入质量规则管理页面
2. 点击"创建规则"
3. 选择规则类型
4. 配置规则参数
5. 关联目标表和字段
6. 保存规则

**成功条件**:
- 规则创建成功
- 规则类型正确
- 参数配置正确
- 关联正确

**失败条件**:
- 规则创建失败
- 规则类型错误
- 参数配置错误
- 关联失败

---

### QUA-002 质量规则列表

**实现目标**: 查看所有质量规则列表

**测试步骤**:
1. 进入质量规则管理页面
2. 验证列表显示所有规则
3. 验证显示规则名称、类型、状态
4. 测试按类型筛选
5. 测试按状态筛选
6. 测试搜索功能

**成功条件**:
- 规则列表完整
- 信息显示正确
- 筛选功能正常
- 搜索功能正常

**失败条件**:
- 规则列表不完整
- 信息显示错误
- 筛选不工作
- 搜索不工作

---

### QUA-003 质量规则编辑

**实现目标**: 修改质量规则配置

**测试步骤**:
1. 选择规则点击编辑
2. 验证原配置加载
3. 修改规则参数
4. 修改关联对象
5. 保存修改

**成功条件**:
- 配置正确加载
- 修改保存成功
- 修改生效
- 版本更新

**失败条件**:
- 配置加载失败
- 保存失败
- 修改不生效
- 版本混乱

---

### QUA-004 质量规则删除

**实现目标**: 删除质量规则

**测试步骤**:
1. 选择未启用的规则
2. 点击删除
3. 确认删除
4. 验证规则移除
5. 尝试删除已关联任务的规则

**成功条件**:
- 规则删除成功
- 列表更新
- 关联规则提示
- 记录日志

**失败条件**:
- 删除失败
- 列表不更新
- 无提示强制删除
- 无确认

---

### QUA-005 完整性规则

**实现目标**: 检查数据完整性（非空、不重复）

**测试步骤**:
1. 创建非空检查规则
2. 配置目标字段
3. 执行规则
4. 验证检出空值记录
5. 创建唯一性规则
6. 验证检出重复记录

**成功条件**:
- 非空检查有效
- 空值记录检出
- 唯一性检查有效
- 重复记录检出

**失败条件**:
- 非空检查无效
- 空值未检出
- 唯一性检查无效
- 重复未检出

---

### QUA-006 唯一性规则

**实现目标**: 检查数据唯一性

**测试步骤**:
1. 创建唯一性规则
2. 选择检查字段（单字段）
3. 执行检查
4. 验证重复值检出
5. 配置多字段组合唯一
6. 验证组合重复检出

**成功条件**:
- 单字段唯一性检查有效
- 重复值正确检出
- 多字段组合检查有效
- 结果统计准确

**失败条件**:
- 唯一性检查无效
- 重复值漏检
- 组合检查无效
- 统计不准确

---

### QUA-007 有效性规则

**实现目标**: 检查数据有效性（格式、范围）

**测试步骤**:
1. 创建格式检查规则（如邮箱格式）
2. 配置正则表达式
3. 执行检查
4. 验证格式错误检出
5. 创建范围检查规则（如年龄 0-150）
6. 验证越界值检出

**成功条件**:
- 格式检查有效
- 正则匹配正确
- 范围检查有效
- 越界值检出

**失败条件**:
- 格式检查无效
- 正则匹配错误
- 范围检查无效
- 越界值漏检

---

### QUA-008 准确性规则

**实现目标**: 检查数据准确性

**测试步骤**:
1. 创建参照数据检查规则
2. 配置参照表和字段
3. 执行检查
4. 验证无效引用检出
5. 创建计算准确性规则
6. 验证计算偏差检出

**成功条件**:
- 参照检查有效
- 无效引用检出
- 计算检查有效
- 偏差检出

**失败条件**:
- 参照检查无效
- 无效引用漏检
- 计算检查无效
- 偏差漏检

---

### QUA-009 一致性规则

**实现目标**: 检查跨表数据一致性

**测试步骤**:
1. 创建跨表一致性规则
2. 配置源表和目标表
3. 配置关联条件
4. 执行检查
5. 验证不一致记录检出
6. 查看详细不一致原因

**成功条件**:
- 一致性检查有效
- 不一致记录检出
- 关联条件正确
- 原因明确

**失败条件**:
- 一致性检查无效
- 不一致漏检
- 关联条件错误
- 原因不明确

---

### QUA-010 时效性规则

**实现目标**: 检查数据时效性

**测试步骤**:
1. 创建数据新鲜度规则
2. 配置时间字段
3. 配置最大延迟阈值
4. 执行检查
5. 验证过期数据检出
6. 查看时效性统计

**成功条件**:
- 时效性检查有效
- 过期数据检出
- 阈值配置正确
- 统计准确

**失败条件**:
- 时效性检查无效
- 过期数据漏检
- 阈值配置错误
- 统计不准确

---

### QUA-011 质量任务创建

**实现目标**: 创建质量检查任务，组合多个规则

**测试步骤**:
1. 进入质量任务页面
2. 创建新任务
3. 添加多个质量规则
4. 配置执行顺序
5. 配置失败处理策略
6. 保存任务

**成功条件**:
- 任务创建成功
- 规则组合正确
- 执行顺序正确
- 策略配置正确

**失败条件**:
- 任务创建失败
- 规则组合错误
- 执行顺序错误
- 策略配置错误

---

### QUA-012 质量任务调度

**实现目标**: 配置质量任务定时调度

**测试步骤**:
1. 编辑质量任务
2. 配置 cron 调度
3. 启用调度
4. 验证调度注册
5. 验证按时执行
6. 查看执行记录

**成功条件**:
- 调度配置成功
- 按时执行
- 执行记录正确
- 状态更新正确

**失败条件**:
- 调度配置失败
- 不按时执行
- 执行记录缺失
- 状态更新错误

---

### QUA-013 质量任务执行

**实现目标**: 手动触发质量检查任务

**测试步骤**:
1. 选择质量任务
2. 点击"立即执行"
3. 验证任务开始执行
4. 等待执行完成
5. 查看执行结果
6. 查看问题数据明细

**成功条件**:
- 任务执行成功
- 结果正确
- 问题数据可查看
- 执行时间合理

**失败条件**:
- 任务执行失败
- 结果错误
- 问题数据不可查看
- 执行超时

---

### QUA-014 质量报告生成

**实现目标**: 生成质量检查报告

**测试步骤**:
1. 执行质量任务
2. 任务完成后生成报告
3. 验证报告内容完整
4. 验证包含规则执行结果
5. 验证包含问题统计
6. 导出报告（PDF/Excel）

**成功条件**:
- 报告生成成功
- 内容完整
- 统计准确
- 导出成功

**失败条件**:
- 报告生成失败
- 内容不完整
- 统计不准确
- 导出失败

---

### QUA-015 质量报告查看

**实现目标**: 查看历史质量报告

**测试步骤**:
1. 进入质量报告页面
2. 查看报告列表
3. 按时间范围筛选
4. 点击查看报告详情
5. 对比不同时间的报告
6. 查看质量趋势

**成功条件**:
- 报告列表完整
- 筛选功能正常
- 详情可查看
- 趋势图正确

**失败条件**:
- 报告列表不完整
- 筛选不工作
- 详情不可查看
- 趋势图错误

---

### QUA-016 质量告警管理

**实现目标**: 管理质量检查触发的告警

**测试步骤**:
1. 配置质量告警阈值
2. 执行质量检查触发告警
3. 查看告警列表
4. 确认告警
5. 解决告警
6. 查看告警历史

**成功条件**:
- 告警正确触发
- 告警列表完整
- 状态流转正确
- 历史可查看

**失败条件**:
- 告警未触发
- 告警列表不完整
- 状态流转错误
- 历史不可查看

---

### QUA-017 质量评分

**实现目标**: 计算数据整体质量评分

**测试步骤**:
1. 执行多个质量规则
2. 查看表级质量评分
3. 查看字段级质量评分
4. 查看整体质量评分
5. 查看评分计算公式
6. 追踪评分历史趋势

**成功条件**:
- 评分计算正确
- 各级评分显示
- 公式透明
- 趋势可追踪

**失败条件**:
- 评分计算错误
- 评分不显示
- 公式不透明
- 趋势不可追踪

---

### QUA-018 AI 清洗规则建议

**实现目标**: AI 分析数据问题并推荐清洗规则

**测试步骤**:
1. 选择一个有质量问题的表
2. 点击"AI 分析建议"
3. 等待 AI 分析完成
4. 查看推荐的清洗规则
5. 评估建议的合理性
6. 采纳或修改建议

**成功条件**:
- AI 分析完成
- 建议合理
- 可采纳或修改
- 采纳后生效

**失败条件**:
- AI 分析失败
- 建议不合理
- 无法采纳
- 采纳后不生效

---

### QUA-019 Great Expectations 集成

**实现目标**: 集成 Great Expectations 质量引擎

**测试步骤**:
1. 配置 Great Expectations 连接
2. 导入 GE Expectation Suite
3. 执行 GE 检查
4. 查看 GE 检查结果
5. 与平台规则结果统一展示
6. 导出 GE 文档

**成功条件**:
- GE 集成成功
- Expectation 导入正常
- 检查执行成功
- 结果统一展示

**失败条件**:
- GE 集成失败
- Expectation 导入失败
- 检查执行失败
- 结果不统一

---

## 3.4 敏感数据管理 (SEN)

**后端代码**: `services/data-api/models/sensitivity.py`, `services/data-api/models/security_audit.py`
**前端代码**: `web/src/pages/data/metadata/AISensitivityScanPanel.tsx`

### SEN-001 敏感扫描任务创建

**实现目标**: 创建敏感数据扫描任务

**测试步骤**:
1. 进入敏感数据管理页面
2. 点击"创建扫描任务"
3. 选择扫描范围（数据源/表）
4. 选择扫描模式
5. 配置扫描参数
6. 保存任务

**成功条件**:
- 任务创建成功
- 范围配置正确
- 模式配置正确
- 参数保存正确

**失败条件**:
- 任务创建失败
- 范围配置错误
- 模式配置错误
- 参数丢失

---

### SEN-002 敏感扫描任务执行

**实现目标**: 执行敏感数据扫描

**测试步骤**:
1. 选择扫描任务
2. 点击"执行"
3. 验证任务开始执行
4. 查看扫描进度
5. 等待扫描完成
6. 查看扫描结果

**成功条件**:
- 扫描成功执行
- 进度正确显示
- 结果正确返回
- 性能可接受

**失败条件**:
- 扫描执行失败
- 进度不显示
- 结果不返回
- 性能太差

---

### SEN-003 扫描进度查看

**实现目标**: 查看扫描任务的执行进度

**测试步骤**:
1. 执行扫描任务
2. 查看进度面板
3. 验证显示已扫描表数
4. 验证显示已扫描字段数
5. 验证显示预计剩余时间
6. 验证进度实时更新

**成功条件**:
- 进度面板显示
- 统计数据准确
- 预计时间合理
- 实时更新

**失败条件**:
- 进度面板不显示
- 统计数据错误
- 预计时间不合理
- 不实时更新

---

### SEN-004 扫描结果查看

**实现目标**: 查看敏感数据识别结果

**测试步骤**:
1. 扫描完成后查看结果
2. 验证显示识别的敏感字段列表
3. 验证显示敏感类型
4. 验证显示置信度
5. 查看敏感数据样本
6. 导出扫描结果

**成功条件**:
- 结果列表完整
- 敏感类型正确
- 置信度合理
- 支持导出

**失败条件**:
- 结果列表不完整
- 敏感类型错误
- 置信度异常
- 不支持导出

---

### SEN-005 结果人工校验

**实现目标**: 人工确认或修正 AI 扫描结果

**测试步骤**:
1. 查看 AI 识别结果
2. 确认一个正确的识别
3. 修正一个错误的识别
4. 标记一个漏检的字段
5. 保存校验结果
6. 验证校验状态更新

**成功条件**:
- 可确认正确识别
- 可修正错误识别
- 可标记漏检
- 校验状态更新

**失败条件**:
- 无法确认
- 无法修正
- 无法标记
- 状态不更新

---

### SEN-006 全量扫描模式

**实现目标**: 全量扫描所有字段

**测试步骤**:
1. 创建扫描任务
2. 选择"全量扫描"模式
3. 执行扫描
4. 验证所有字段被扫描
5. 验证扫描耗时
6. 对比增量扫描结果

**成功条件**:
- 全量扫描执行
- 所有字段被扫描
- 耗时合理
- 结果完整

**失败条件**:
- 全量扫描失败
- 字段遗漏
- 耗时过长
- 结果不完整

---

### SEN-007 增量扫描模式

**实现目标**: 仅扫描新增字段

**测试步骤**:
1. 执行一次全量扫描
2. 添加新表/新字段
3. 执行增量扫描
4. 验证仅扫描新增部分
5. 验证扫描耗时减少
6. 验证历史结果保留

**成功条件**:
- 增量扫描执行
- 仅扫描新增
- 耗时减少
- 历史保留

**失败条件**:
- 增量扫描失败
- 重复扫描旧字段
- 耗时不减少
- 历史丢失

---

### SEN-008 采样扫描模式

**实现目标**: 按采样率扫描字段数据

**测试步骤**:
1. 创建扫描任务
2. 选择"采样扫描"模式
3. 配置采样率（如 10%）
4. 执行扫描
5. 验证按采样率扫描
6. 对比全量扫描准确性

**成功条件**:
- 采样扫描执行
- 采样率生效
- 耗时减少
- 准确性可接受

**失败条件**:
- 采样扫描失败
- 采样率不生效
- 耗时未减少
- 准确性太低

---

### SEN-009 敏感模式库管理

**实现目标**: 管理敏感数据识别模式（正则/关键词）

**测试步骤**:
1. 进入敏感模式库
2. 查看预置模式列表
3. 创建自定义模式
4. 编辑模式规则
5. 测试模式匹配
6. 启用/禁用模式

**成功条件**:
- 模式库显示正确
- 自定义模式创建成功
- 规则编辑成功
- 测试匹配正确

**失败条件**:
- 模式库不显示
- 自定义模式创建失败
- 规则编辑失败
- 测试匹配错误

---

### SEN-010 系统预置模式

**实现目标**: 内置 PII、财务、健康、凭证等敏感模式

**测试步骤**:
1. 查看预置模式列表
2. 验证包含手机号模式
3. 验证包含身份证模式
4. 验证包含银行卡模式
5. 验证包含邮箱模式
6. 执行扫描验证预置模式生效

**成功条件**:
- 预置模式完整
- 各类型模式正确
- 扫描时生效
- 匹配准确

**失败条件**:
- 预置模式不完整
- 模式规则错误
- 扫描时不生效
- 匹配不准确

---

### SEN-011 自定义模式

**实现目标**: 用户自定义敏感数据模式

**测试步骤**:
1. 创建自定义模式
2. 配置模式名称和类型
3. 配置正则表达式
4. 配置关键词列表
5. 测试模式匹配
6. 保存并启用模式

**成功条件**:
- 自定义模式创建成功
- 正则配置正确
- 关键词配置正确
- 测试匹配正确

**失败条件**:
- 自定义模式创建失败
- 正则配置错误
- 关键词配置错误
- 测试匹配错误

---

### SEN-012 脱敏规则管理

**实现目标**: 管理数据脱敏规则

**测试步骤**:
1. 进入脱敏规则管理
2. 创建脱敏规则
3. 关联敏感字段
4. 配置脱敏方式
5. 预览脱敏效果
6. 启用脱敏规则

**成功条件**:
- 规则创建成功
- 字段关联正确
- 脱敏方式生效
- 预览效果正确

**失败条件**:
- 规则创建失败
- 字段关联错误
- 脱敏方式不生效
- 预览效果错误

---

### SEN-013 部分脱敏

**实现目标**: 部分字符脱敏（如手机号中间四位）

**测试步骤**:
1. 创建部分脱敏规则
2. 配置保留前 N 位
3. 配置保留后 M 位
4. 配置替换字符（如 *）
5. 预览脱敏效果
6. 验证 138****1234 格式

**成功条件**:
- 部分脱敏配置成功
- 保留位数正确
- 替换字符正确
- 格式符合预期

**失败条件**:
- 部分脱敏配置失败
- 保留位数错误
- 替换字符错误
- 格式不符合预期

---

### SEN-014 完全脱敏

**实现目标**: 完全替换为占位符

**测试步骤**:
1. 创建完全脱敏规则
2. 配置占位符（如 ***）
3. 预览脱敏效果
4. 验证原值完全隐藏
5. 验证不同长度处理
6. 执行脱敏操作

**成功条件**:
- 完全脱敏配置成功
- 占位符显示正确
- 原值完全隐藏
- 长度处理正确

**失败条件**:
- 完全脱敏配置失败
- 占位符显示错误
- 原值部分显示
- 长度处理错误

---

### SEN-015 哈希脱敏

**实现目标**: 使用哈希值替换敏感数据

**测试步骤**:
1. 创建哈希脱敏规则
2. 选择哈希算法（MD5/SHA256）
3. 配置是否加盐
4. 预览脱敏效果
5. 验证哈希值正确
6. 验证相同输入相同输出

**成功条件**:
- 哈希脱敏配置成功
- 哈希算法正确
- 加盐配置生效
- 输出一致性

**失败条件**:
- 哈希脱敏配置失败
- 哈希算法错误
- 加盐配置不生效
- 输出不一致

---

### SEN-016 加密脱敏

**实现目标**: 使用加密算法脱敏，支持解密还原

**测试步骤**:
1. 创建加密脱敏规则
2. 选择加密算法（AES）
3. 配置加密密钥
4. 执行加密脱敏
5. 验证密文生成
6. 测试解密还原

**成功条件**:
- 加密脱敏配置成功
- 密文生成正确
- 解密还原成功
- 密钥管理安全

**失败条件**:
- 加密脱敏配置失败
- 密文生成错误
- 解密还原失败
- 密钥管理不安全

---

### SEN-017 安全审计日志

**实现目标**: 记录所有敏感数据操作的审计日志

**测试步骤**:
1. 执行敏感数据扫描
2. 执行数据脱敏
3. 查看审计日志
4. 验证记录操作类型
5. 验证记录操作人
6. 验证记录操作时间

**成功条件**:
- 审计日志完整记录
- 操作类型正确
- 操作人正确
- 时间准确

**失败条件**:
- 审计日志不记录
- 操作类型错误
- 操作人错误
- 时间不准确

---

## 3.5 数据标准管理 (STD)

**后端代码**: `services/data-api/models/standards.py`
**前端代码**: `web/src/pages/data/standards/StandardsPage.tsx`

### STD-001 数据标准创建

**实现目标**: 创建数据标准定义

**测试步骤**:
1. 进入数据标准管理页面
2. 点击"创建标准"
3. 填写标准名称和描述
4. 选择标准类型
5. 配置标准规则
6. 保存标准

**成功条件**:
- 标准创建成功
- 信息保存完整
- 类型选择正确
- 规则配置正确

**失败条件**:
- 标准创建失败
- 信息保存不完整
- 类型选择错误
- 规则配置错误

---

### STD-002 数据标准列表

**实现目标**: 查看所有数据标准

**测试步骤**:
1. 进入数据标准管理页面
2. 验证列表显示所有标准
3. 验证显示标准名称、类型、状态
4. 测试按类型筛选
5. 测试搜索功能

**成功条件**:
- 列表完整显示
- 信息正确
- 筛选功能正常
- 搜索功能正常

**失败条件**:
- 列表不完整
- 信息错误
- 筛选不工作
- 搜索不工作

---

### STD-003 数据标准编辑

**实现目标**: 修改数据标准

**测试步骤**:
1. 选择标准点击编辑
2. 验证原配置加载
3. 修改标准规则
4. 保存修改
5. 验证修改生效

**成功条件**:
- 配置正确加载
- 修改保存成功
- 修改生效
- 版本更新

**失败条件**:
- 配置加载失败
- 保存失败
- 修改不生效
- 版本不更新

---

### STD-004 数据标准删除

**实现目标**: 删除数据标准

**测试步骤**:
1. 选择未被引用的标准
2. 点击删除
3. 确认删除
4. 验证标准移除
5. 尝试删除被引用的标准

**成功条件**:
- 删除成功
- 列表更新
- 被引用标准提示
- 记录日志

**失败条件**:
- 删除失败
- 列表不更新
- 被引用标准被删除
- 无确认

---

### STD-005 命名规范标准

**实现目标**: 定义字段命名规范

**测试步骤**:
1. 创建命名规范标准
2. 配置命名模式（如驼峰/下划线）
3. 配置前缀/后缀规则
4. 配置保留字列表
5. 验证标准规则
6. 应用到字段检查

**成功条件**:
- 命名规范创建成功
- 模式配置正确
- 前后缀配置正确
- 检查生效

**失败条件**:
- 命名规范创建失败
- 模式配置错误
- 前后缀配置错误
- 检查不生效

---

### STD-006 格式规范标准

**实现目标**: 定义数据格式规范

**测试步骤**:
1. 创建格式规范标准
2. 配置日期格式（如 YYYY-MM-DD）
3. 配置数字格式（如小数位数）
4. 配置字符串格式（如最大长度）
5. 验证标准规则
6. 应用到数据检查

**成功条件**:
- 格式规范创建成功
- 日期格式配置正确
- 数字格式配置正确
- 检查生效

**失败条件**:
- 格式规范创建失败
- 日期格式配置错误
- 数字格式配置错误
- 检查不生效

---

### STD-007 范围规范标准

**实现目标**: 定义数据取值范围

**测试步骤**:
1. 创建范围规范标准
2. 配置最小值
3. 配置最大值
4. 配置是否包含边界
5. 验证标准规则
6. 应用到数据检查

**成功条件**:
- 范围规范创建成功
- 最小值配置正确
- 最大值配置正确
- 检查生效

**失败条件**:
- 范围规范创建失败
- 最小值配置错误
- 最大值配置错误
- 检查不生效

---

### STD-008 枚举规范标准

**实现目标**: 定义枚举值列表

**测试步骤**:
1. 创建枚举规范标准
2. 添加枚举值
3. 配置枚举值描述
4. 配置是否允许扩展
5. 验证标准规则
6. 应用到数据检查

**成功条件**:
- 枚举规范创建成功
- 枚举值添加成功
- 描述配置正确
- 检查生效

**失败条件**:
- 枚举规范创建失败
- 枚举值添加失败
- 描述配置错误
- 检查不生效

---

### STD-009 引用规范标准

**实现目标**: 定义参照数据标准

**测试步骤**:
1. 创建引用规范标准
2. 配置参照表
3. 配置参照字段
4. 配置引用关系
5. 验证标准规则
6. 应用到数据检查

**成功条件**:
- 引用规范创建成功
- 参照配置正确
- 引用关系正确
- 检查生效

**失败条件**:
- 引用规范创建失败
- 参照配置错误
- 引用关系错误
- 检查不生效

---

### STD-010 标准验证执行

**实现目标**: 执行数据标准验证

**测试步骤**:
1. 选择要验证的表
2. 关联数据标准
3. 执行标准验证
4. 等待验证完成
5. 查看验证结果
6. 查看违规明细

**成功条件**:
- 验证执行成功
- 结果正确
- 违规明细可查看
- 性能可接受

**失败条件**:
- 验证执行失败
- 结果错误
- 违规明细不可查看
- 性能太差

---

### STD-011 验证结果查看

**实现目标**: 查看标准验证结果

**测试步骤**:
1. 执行标准验证
2. 查看验证结果页面
3. 验证显示通过/不通过状态
4. 验证显示违规数量
5. 查看违规详情
6. 导出验证报告

**成功条件**:
- 结果页面显示
- 状态正确
- 违规统计正确
- 报告导出成功

**失败条件**:
- 结果页面不显示
- 状态错误
- 违规统计错误
- 报告导出失败

---

### STD-012 违规统计

**实现目标**: 统计标准违规次数

**测试步骤**:
1. 执行多次标准验证
2. 查看违规统计面板
3. 验证按标准类型统计
4. 验证按时间趋势统计
5. 验证按表统计
6. 导出统计报表

**成功条件**:
- 统计数据正确
- 分类统计正确
- 趋势统计正确
- 报表导出成功

**失败条件**:
- 统计数据错误
- 分类统计错误
- 趋势统计错误
- 报表导出失败

---

## 3.6 数据资产管理 (AST)

**后端代码**: `services/data-api/models/assets.py`, `services/data-api/models/asset_value_metrics.py`
**前端代码**: `web/src/pages/data/assets/AssetsPage.tsx`

### AST-001 资产目录浏览

**实现目标**: 浏览数据资产目录

**测试步骤**:
1. 进入数据资产页面
2. 验证显示资产目录树
3. 展开目录节点
4. 验证显示子目录和资产
5. 点击资产查看详情
6. 测试目录搜索

**成功条件**:
- 目录树正确显示
- 展开折叠正常
- 资产详情可查看
- 搜索功能正常

**失败条件**:
- 目录树不显示
- 展开折叠异常
- 详情不可查看
- 搜索不工作

---

### AST-002 资产搜索

**实现目标**: 搜索数据资产

**测试步骤**:
1. 在搜索框输入关键词
2. 验证搜索资产名称
3. 验证搜索资产描述
4. 验证搜索资产标签
5. 测试高级搜索
6. 测试搜索结果排序

**成功条件**:
- 搜索结果准确
- 多字段搜索支持
- 高级搜索支持
- 排序功能正常

**失败条件**:
- 搜索结果不准确
- 多字段搜索不支持
- 高级搜索不支持
- 排序不工作

---

### AST-003 资产详情查看

**实现目标**: 查看资产详细信息

**测试步骤**:
1. 选择一个资产
2. 查看基本信息
3. 查看字段信息
4. 查看血缘关系
5. 查看使用统计
6. 查看质量评分

**成功条件**:
- 详情页面完整
- 各类信息正确
- 关联信息可查看
- 统计数据准确

**失败条件**:
- 详情页面不完整
- 信息错误
- 关联信息不可查看
- 统计数据不准确

---

### AST-004 资产分类管理

**实现目标**: 管理资产分类层级

**测试步骤**:
1. 进入分类管理
2. 创建新分类
3. 创建子分类
4. 编辑分类名称
5. 移动分类位置
6. 删除分类

**成功条件**:
- 分类创建成功
- 层级关系正确
- 编辑和移动成功
- 删除成功

**失败条件**:
- 分类创建失败
- 层级关系错误
- 编辑或移动失败
- 删除失败

---

### AST-005 资产标签管理

**实现目标**: 为资产添加标签

**测试步骤**:
1. 选择资产编辑标签
2. 添加新标签
3. 从已有标签选择
4. 删除标签
5. 按标签筛选资产
6. 查看标签统计

**成功条件**:
- 标签添加成功
- 标签选择正常
- 标签删除成功
- 筛选功能正常

**失败条件**:
- 标签添加失败
- 标签选择异常
- 标签删除失败
- 筛选不工作

---

### AST-006 资产收藏

**实现目标**: 收藏常用资产

**测试步骤**:
1. 选择资产点击收藏
2. 验证收藏成功
3. 查看我的收藏列表
4. 验证收藏资产显示
5. 取消收藏
6. 验证取消成功

**成功条件**:
- 收藏操作成功
- 收藏列表显示
- 取消收藏成功
- 状态同步正确

**失败条件**:
- 收藏操作失败
- 收藏列表不显示
- 取消收藏失败
- 状态不同步

---

### AST-007 资产申请

**实现目标**: 申请资产访问权限

**测试步骤**:
1. 选择需要访问的资产
2. 点击"申请访问"
3. 填写申请理由
4. 选择申请的权限级别
5. 提交申请
6. 查看申请状态

**成功条件**:
- 申请提交成功
- 申请状态可查看
- 审批流程触发
- 通知发送正确

**失败条件**:
- 申请提交失败
- 申请状态不可查看
- 审批流程未触发
- 通知发送失败

---

### AST-008 资产等级管理

**实现目标**: 设置资产数据等级

**测试步骤**:
1. 选择资产编辑等级
2. 设置为 public 级别
3. 设置为 internal 级别
4. 设置为 confidential 级别
5. 设置为 restricted 级别
6. 验证权限控制生效

**成功条件**:
- 等级设置成功
- 支持所有级别
- 权限控制生效
- 状态显示正确

**失败条件**:
- 等级设置失败
- 级别不完整
- 权限控制不生效
- 状态显示错误

---

### AST-009 资产所有者管理

**实现目标**: 管理资产负责人

**测试步骤**:
1. 选择资产设置所有者
2. 搜索并选择用户
3. 设置主要负责人
4. 添加协助负责人
5. 变更负责人
6. 验证权限更新

**成功条件**:
- 所有者设置成功
- 用户搜索正常
- 多负责人支持
- 权限正确更新

**失败条件**:
- 所有者设置失败
- 用户搜索异常
- 不支持多负责人
- 权限更新错误

---

### AST-010 资产使用统计

**实现目标**: 统计资产访问次数和用户数

**测试步骤**:
1. 查看资产详情
2. 查看使用统计面板
3. 验证访问次数统计
4. 验证访问用户数统计
5. 查看访问趋势图
6. 查看 Top 访问用户

**成功条件**:
- 统计数据准确
- 访问次数正确
- 用户数正确
- 趋势图正确

**失败条件**:
- 统计数据不准确
- 访问次数错误
- 用户数错误
- 趋势图错误

---

### AST-011 资产价值评估

**实现目标**: 计算资产综合价值评分

**测试步骤**:
1. 查看资产价值评分
2. 验证评分计算正确
3. 查看评分维度明细
4. 对比不同资产评分
5. 查看评分历史
6. 理解评分公式

**成功条件**:
- 价值评分显示
- 计算正确
- 维度明细完整
- 历史可查看

**失败条件**:
- 价值评分不显示
- 计算错误
- 维度明细不完整
- 历史不可查看

---

### AST-012 使用频率评估

**实现目标**: 评估资产使用频率

**测试步骤**:
1. 查看资产使用频率指标
2. 验证日均访问次数
3. 验证周活跃用户数
4. 验证月访问趋势
5. 与同类资产对比
6. 查看频率变化

**成功条件**:
- 频率指标显示
- 统计数据准确
- 趋势显示正确
- 对比功能正常

**失败条件**:
- 频率指标不显示
- 统计数据不准确
- 趋势显示错误
- 对比功能异常

---

### AST-013 业务重要度评估

**实现目标**: 评估资产业务重要度

**测试步骤**:
1. 查看资产业务重要度
2. 验证关联业务系统数
3. 验证下游依赖数
4. 设置人工重要度权重
5. 综合计算重要度得分
6. 按重要度排序资产

**成功条件**:
- 重要度显示
- 关联统计正确
- 人工权重生效
- 排序功能正常

**失败条件**:
- 重要度不显示
- 关联统计错误
- 人工权重不生效
- 排序功能异常

---

### AST-014 质量评分

**实现目标**: 计算资产数据质量评分

**测试步骤**:
1. 查看资产质量评分
2. 验证关联质量规则
3. 验证质量检查结果
4. 查看质量维度得分
5. 对比历史质量变化
6. 设置质量改进目标

**成功条件**:
- 质量评分显示
- 规则关联正确
- 结果计算正确
- 历史可对比

**失败条件**:
- 质量评分不显示
- 规则关联错误
- 结果计算错误
- 历史不可对比

---

### AST-015 治理成熟度评估

**实现目标**: 评估资产治理成熟度

**测试步骤**:
1. 查看资产治理成熟度
2. 验证元数据完整度
3. 验证血缘覆盖度
4. 验证标准合规度
5. 验证安全防护度
6. 综合计算成熟度等级

**成功条件**:
- 成熟度显示
- 各维度计算正确
- 等级划分合理
- 改进建议显示

**失败条件**:
- 成熟度不显示
- 维度计算错误
- 等级划分不合理
- 无改进建议

---

### AST-016 价值历史趋势

**实现目标**: 查看资产价值变化趋势

**测试步骤**:
1. 查看资产价值趋势图
2. 选择时间范围
3. 验证历史数据点
4. 查看变化原因
5. 导出趋势数据
6. 设置价值预警

**成功条件**:
- 趋势图显示
- 时间范围选择正常
- 数据点准确
- 导出功能正常

**失败条件**:
- 趋势图不显示
- 时间范围选择异常
- 数据点不准确
- 导出功能失败

---

### AST-017 AI 资产搜索

**实现目标**: AI 语义搜索数据资产

**测试步骤**:
1. 使用自然语言描述需求
2. 等待 AI 搜索返回结果
3. 验证结果相关性
4. 测试同义词搜索
5. 测试模糊描述搜索
6. 反馈搜索结果质量

**成功条件**:
- AI 搜索功能可用
- 结果相关性高
- 同义词搜索有效
- 模糊描述处理好

**失败条件**:
- AI 搜索不可用
- 结果相关性低
- 同义词搜索无效
- 模糊描述处理差

---

### AST-018 资产自动编目

**实现目标**: 自动发现和编目新资产

**测试步骤**:
1. 配置自动编目任务
2. 设置扫描范围
3. 执行自动编目
4. 查看新发现的资产
5. 审核并确认编目
6. 验证资产入库

**成功条件**:
- 自动编目执行
- 新资产被发现
- 审核流程正常
- 资产正确入库

**失败条件**:
- 自动编目失败
- 新资产未发现
- 审核流程异常
- 资产入库失败

---

## 3.7 特征存储 (FEA)

**后端代码**: `services/data-api/models/feature.py`
**前端代码**: `web/src/pages/data/features/FeaturesPage.tsx`

### FEA-001 特征组创建

**实现目标**: 创建特征组

**测试步骤**:
1. 进入特征存储页面
2. 点击"创建特征组"
3. 填写特征组名称和描述
4. 选择关联实体类型
5. 配置存储后端
6. 保存特征组

**成功条件**:
- 特征组创建成功
- 信息保存完整
- 实体类型正确
- 存储配置正确

**失败条件**:
- 特征组创建失败
- 信息保存不完整
- 实体类型错误
- 存储配置错误

---

### FEA-002 特征组列表

**实现目标**: 查看特征组列表

**测试步骤**:
1. 进入特征存储页面
2. 验证列表显示所有特征组
3. 验证显示名称、实体、特征数
4. 测试按实体筛选
5. 测试搜索功能

**成功条件**:
- 列表完整显示
- 信息正确
- 筛选功能正常
- 搜索功能正常

**失败条件**:
- 列表不完整
- 信息错误
- 筛选不工作
- 搜索不工作

---

### FEA-003 特征组编辑

**实现目标**: 修改特征组配置

**测试步骤**:
1. 选择特征组点击编辑
2. 验证原配置加载
3. 修改描述信息
4. 修改存储配置
5. 保存修改

**成功条件**:
- 配置正确加载
- 修改保存成功
- 修改生效
- 版本更新

**失败条件**:
- 配置加载失败
- 保存失败
- 修改不生效
- 版本不更新

---

### FEA-004 特征组删除

**实现目标**: 删除特征组

**测试步骤**:
1. 选择空的特征组
2. 点击删除
3. 确认删除
4. 验证特征组移除
5. 尝试删除非空特征组

**成功条件**:
- 空特征组删除成功
- 非空特征组提示
- 列表更新
- 记录日志

**失败条件**:
- 删除失败
- 无提示直接删除
- 列表不更新
- 无确认

---

### FEA-005 特征创建

**实现目标**: 在特征组中创建特征

**测试步骤**:
1. 选择特征组
2. 点击"添加特征"
3. 填写特征名称和描述
4. 选择数据类型
5. 配置计算逻辑
6. 保存特征

**成功条件**:
- 特征创建成功
- 信息保存完整
- 数据类型正确
- 计算逻辑正确

**失败条件**:
- 特征创建失败
- 信息保存不完整
- 数据类型错误
- 计算逻辑错误

---

### FEA-006 特征编辑

**实现目标**: 修改特征定义

**测试步骤**:
1. 选择特征点击编辑
2. 验证原配置加载
3. 修改特征描述
4. 修改计算逻辑
5. 保存修改

**成功条件**:
- 配置正确加载
- 修改保存成功
- 修改生效
- 历史版本保留

**失败条件**:
- 配置加载失败
- 保存失败
- 修改不生效
- 历史版本丢失

---

### FEA-007 特征删除

**实现目标**: 删除特征

**测试步骤**:
1. 选择未被引用的特征
2. 点击删除
3. 确认删除
4. 验证特征移除
5. 尝试删除被引用的特征

**成功条件**:
- 特征删除成功
- 被引用特征提示
- 列表更新
- 记录日志

**失败条件**:
- 删除失败
- 无提示直接删除
- 列表不更新
- 无确认

---

### FEA-008 实体配置

**实现目标**: 配置特征的实体信息

**测试步骤**:
1. 选择特征组配置实体
2. 选择实体类型（user/product/order）
3. 配置实体主键字段
4. 配置实体时间戳字段
5. 保存配置
6. 验证实体关联

**成功条件**:
- 实体配置成功
- 类型选择正确
- 主键配置正确
- 时间戳配置正确

**失败条件**:
- 实体配置失败
- 类型选择错误
- 主键配置错误
- 时间戳配置错误

---

### FEA-009 批量特征配置

**实现目标**: 配置批量计算的特征

**测试步骤**:
1. 创建批量特征
2. 配置数据源（离线表）
3. 配置计算 SQL
4. 配置计算调度
5. 执行批量计算
6. 验证特征数据写入

**成功条件**:
- 批量特征配置成功
- 数据源连接正常
- 计算执行成功
- 数据写入正确

**失败条件**:
- 批量特征配置失败
- 数据源连接失败
- 计算执行失败
- 数据写入错误

---

### FEA-010 流式特征配置

**实现目标**: 配置实时计算的特征

**测试步骤**:
1. 创建流式特征
2. 配置数据源（Kafka）
3. 配置实时计算逻辑
4. 启动流式作业
5. 发送测试数据
6. 验证特征实时更新

**成功条件**:
- 流式特征配置成功
- 实时计算正常
- 特征实时更新
- 延迟在可接受范围

**失败条件**:
- 流式特征配置失败
- 实时计算异常
- 特征不更新
- 延迟过高

---

### FEA-011 派生特征定义

**实现目标**: 定义基于其他特征的派生特征

**测试步骤**:
1. 创建派生特征
2. 选择依赖的基础特征
3. 配置转换表达式
4. 保存派生特征
5. 验证依赖关系
6. 验证派生计算正确

**成功条件**:
- 派生特征创建成功
- 依赖关系正确
- 表达式计算正确
- 级联更新正常

**失败条件**:
- 派生特征创建失败
- 依赖关系错误
- 表达式计算错误
- 级联更新异常

---

### FEA-012 聚合特征定义

**实现目标**: 定义聚合特征（sum/avg/count/max/min）

**测试步骤**:
1. 创建聚合特征
2. 选择聚合函数（sum）
3. 配置聚合维度
4. 配置聚合时间窗口
5. 保存聚合特征
6. 验证聚合计算正确

**成功条件**:
- 聚合特征创建成功
- 聚合函数正确
- 时间窗口正确
- 计算结果正确

**失败条件**:
- 聚合特征创建失败
- 聚合函数错误
- 时间窗口错误
- 计算结果错误

---

### FEA-013 在线存储配置

**实现目标**: 配置在线特征存储

**测试步骤**:
1. 配置在线存储后端（Redis/DynamoDB）
2. 设置连接参数
3. 测试连接
4. 配置特征同步到在线存储
5. 验证在线查询延迟
6. 测试高并发访问

**成功条件**:
- 在线存储配置成功
- 连接测试通过
- 查询延迟低
- 高并发稳定

**失败条件**:
- 在线存储配置失败
- 连接测试失败
- 查询延迟高
- 高并发不稳定

---

### FEA-014 离线存储配置

**实现目标**: 配置离线特征存储

**测试步骤**:
1. 配置离线存储后端（HDFS/S3）
2. 设置存储路径
3. 配置存储格式（Parquet）
4. 配置分区策略
5. 验证数据写入
6. 验证历史数据查询

**成功条件**:
- 离线存储配置成功
- 存储格式正确
- 分区策略生效
- 历史查询正常

**失败条件**:
- 离线存储配置失败
- 存储格式错误
- 分区策略不生效
- 历史查询失败

---

### FEA-015 特征统计查看

**实现目标**: 查看特征统计信息

**测试步骤**:
1. 选择特征查看统计
2. 验证显示最小值
3. 验证显示最大值
4. 验证显示平均值
5. 验证显示标准差
6. 查看数值分布直方图

**成功条件**:
- 统计信息显示
- 数值计算正确
- 分布图正确
- 统计实时更新

**失败条件**:
- 统计信息不显示
- 数值计算错误
- 分布图错误
- 统计不更新

---

### FEA-016 TTL 配置

**实现目标**: 配置特征数据过期时间

**测试步骤**:
1. 选择特征配置 TTL
2. 设置过期时间（如 7 天）
3. 保存配置
4. 等待数据过期
5. 验证过期数据被清理
6. 验证在线和离线存储都生效

**成功条件**:
- TTL 配置成功
- 过期时间正确
- 数据按时清理
- 双存储都生效

**失败条件**:
- TTL 配置失败
- 过期时间错误
- 数据未清理
- 只有部分存储生效

---

## 3.8 数据集管理 (DST)

**后端代码**: `services/data-api/models/dataset.py`
**前端代码**: `web/src/pages/datasets/DatasetsPage.tsx`

### DST-001 数据集创建

**实现目标**: 创建数据集

**测试步骤**:
1. 进入数据集管理页面
2. 点击"创建数据集"
3. 填写数据集名称和描述
4. 选择数据来源
5. 配置数据集字段
6. 保存数据集

**成功条件**:
- 数据集创建成功
- 信息保存完整
- 数据来源配置正确
- 字段配置正确

**失败条件**:
- 数据集创建失败
- 信息保存不完整
- 数据来源配置错误
- 字段配置错误

---

### DST-002 数据集列表

**实现目标**: 查看数据集列表

**测试步骤**:
1. 进入数据集管理页面
2. 验证列表显示所有数据集
3. 验证显示名称、版本、大小
4. 测试筛选功能
5. 测试搜索功能

**成功条件**:
- 列表完整显示
- 信息正确
- 筛选功能正常
- 搜索功能正常

**失败条件**:
- 列表不完整
- 信息错误
- 筛选不工作
- 搜索不工作

---

### DST-003 数据集详情

**实现目标**: 查看数据集详情

**测试步骤**:
1. 选择数据集查看详情
2. 验证基本信息显示
3. 验证字段定义显示
4. 验证版本历史显示
5. 验证数据预览
6. 查看数据统计

**成功条件**:
- 详情页面完整
- 各类信息正确
- 预览功能正常
- 统计数据准确

**失败条件**:
- 详情页面不完整
- 信息错误
- 预览功能异常
- 统计数据不准确

---

### DST-004 数据集版本管理

**实现目标**: 管理数据集版本

**测试步骤**:
1. 查看数据集版本列表
2. 创建新版本
3. 添加版本描述
4. 对比不同版本
5. 切换使用版本
6. 删除旧版本

**成功条件**:
- 版本列表显示
- 新版本创建成功
- 版本对比可用
- 版本切换成功

**失败条件**:
- 版本列表不显示
- 新版本创建失败
- 版本对比不可用
- 版本切换失败

---

### DST-005 数据集字段定义

**实现目标**: 定义数据集字段

**测试步骤**:
1. 编辑数据集字段
2. 添加新字段
3. 设置字段名称和类型
4. 设置字段描述
5. 设置字段约束
6. 保存字段定义

**成功条件**:
- 字段添加成功
- 类型设置正确
- 描述保存成功
- 约束配置正确

**失败条件**:
- 字段添加失败
- 类型设置错误
- 描述保存失败
- 约束配置错误

---

## 统计汇总

| 模块 | 功能数 | 功能编号范围 |
|------|--------|-------------|
| 元数据管理 (META) | 15 | META-001 ~ META-015 |
| 数据血缘 (LIN) | 10 | LIN-001 ~ LIN-010 |
| 数据质量管理 (QUA) | 19 | QUA-001 ~ QUA-019 |
| 敏感数据管理 (SEN) | 17 | SEN-001 ~ SEN-017 |
| 数据标准管理 (STD) | 12 | STD-001 ~ STD-012 |
| 数据资产管理 (AST) | 18 | AST-001 ~ AST-018 |
| 特征存储 (FEA) | 16 | FEA-001 ~ FEA-016 |
| 数据集管理 (DST) | 5 | DST-001 ~ DST-005 |
| **总计** | **112** | |

---

## 版本历史

| 版本 | 日期 | 变更说明 |
|------|------|---------|
| 1.0.0 | 2026-02-09 | 初始版本 |

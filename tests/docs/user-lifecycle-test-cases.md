# 用户生命周期测试用例详细说明

**文档版本**: 1.0
**创建日期**: 2024-02-07

## 一、阶段1: 入职准备测试用例

### 1.1 创建账户 (LC-ON-001)

| 用例ID | 测试场景 | 测试类型 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|----------|--------|----------|----------|----------|
| SA-UL-U-001 | 创建新用户 | Unit | P0 | 管理员已登录 | 1.填写用户信息<br>2.分配角色<br>3.提交创建 | 用户创建成功，状态为pending |
| SA-UL-I-001 | 批量导入用户 | Integration | P1 | CSV文件已准备 | 1.上传CSV<br>2.验证数据<br>3.执行导入 | 批量创建成功 |
| SA-UL-E-001 | 用户创建完整流程 | E2E | P0 | 管理员已登录 | 1.导航用户管理<br>2.填写表单<br>3.提交创建 | 流程完成，用户列表显示 |

### 1.2 生成初始密码 (LC-ON-002)

| 用例ID | 测试场景 | 测试类型 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|----------|--------|----------|----------|----------|
| SA-UL-U-002 | 生成初始密码 | Unit | P0 | 用户已创建 | 系统自动生成密码 | 密码符合安全策略 |
| SA-UL-E-002 | 查看初始密码 | E2E | P1 | 用户已创建 | 1.点击查看密码<br>2.验证显示 | 密码正确显示 |

### 1.3 发送激活通知 (LC-ON-003)

| 用例ID | 测试场景 | 测试类型 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|----------|--------|----------|----------|----------|
| SA-UL-E-003 | 发送激活邮件 | E2E | P0 | 用户已创建 | 1.点击发送通知<br>2.确认发送 | 邮件发送成功 |

## 二、阶段2: 首次激活测试用例

### 2.1 登录验证 (LC-AC-001)

| 用例ID | 测试场景 | 测试类型 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|----------|--------|----------|----------|----------|
| LC-AC-E-001 | 首次登录验证 | E2E | P0 | 收到激活通知 | 1.输入用户名<br>2.输入初始密码<br>3.登录 | 登录成功，提示修改密码 |

### 2.2 修改密码 (LC-AC-002)

| 用例ID | 测试场景 | 测试类型 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|----------|--------|----------|----------|----------|
| LC-AC-E-002 | 修改初始密码 | E2E | P0 | 首次登录后 | 1.输入新密码<br>2.确认密码<br>3.提交 | 密码修改成功 |

### 2.3 状态转换 (LC-AC-003)

| 用例ID | 测试场景 | 测试类型 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|----------|--------|----------|----------|----------|
| LC-AC-E-003 | pending→active状态转换 | E2E | P0 | 密码已修改 | 1.查看用户状态<br>2.验证状态值 | 状态变为active |

## 三、阶段3: 熟练使用测试用例

### 3.1 数据管理员 (DA)

| 用例ID | 测试场景 | 测试类型 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|----------|--------|----------|----------|----------|
| DA-DS-E-001 | 数据源注册完整流程 | E2E | P0 | 已登录 | 1.填写数据源信息<br>2.测试连接<br>3.保存 | 数据源创建成功 |
| DA-MD-E-001 | 元数据扫描完整流程 | E2E | P0 | 数据源已存在 | 1.启动扫描<br>2.查看进度<br>3.查看结果 | 扫描完成，元数据已记录 |
| DA-SD-E-001 | 敏感数据扫描完整流程 | E2E | P0 | 表已存在 | 1.配置扫描规则<br>2.执行扫描<br>3.查看报告 | 报告生成 |
| DA-LG-E-001 | 血缘图查看 | E2E | P0 | 元数据已存在 | 1.选择表<br>2.查看血缘图 | 图表正确显示 |

### 3.2 数据工程师 (DE)

| 用例ID | 测试场景 | 测试类型 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|----------|--------|----------|----------|----------|
| DE-ETL-E-001 | ETL 任务完整流程 | E2E | P0 | 数据源已配置 | 1.创建ETL任务<br>2.配置转换<br>3.执行任务 | 任务执行成功 |
| DE-DQ-E-001 | 质量检查完整流程 | E2E | P0 | 表已存在 | 1.配置质量规则<br>2.执行检查<br>3.查看报告 | 报告生成 |

### 3.3 AI 开发者 (AD)

| 用例ID | 测试场景 | 测试类型 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|----------|--------|----------|----------|----------|
| AD-WF-E-001 | 工作流完整流程 | E2E | P0 | 已登录 | 1.创建工作流<br>2.配置节点<br>3.执行工作流 | 工作流执行成功 |
| AD-KB-E-001 | 知识库完整流程 | E2E | P0 | 已登录 | 1.创建知识库<br>2.上传文档<br>3.测试检索 | 检索成功 |
| AD-AG-E-001 | Agent 应用完整流程 | E2E | P0 | 工作流已创建 | 1.发布应用<br>2.配置API<br>3.测试调用 | 应用可调用 |

### 3.4 数据分析师 (AN)

| 用例ID | 测试场景 | 测试类型 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|----------|--------|----------|----------|----------|
| AN-BI-E-001 | BI 报表完整流程 | E2E | P0 | 数据源已配置 | 1.创建仪表板<br>2.添加图表<br>3.查看报表 | 报表正常显示 |
| AN-SQ-E-001 | SQL 查询完整流程 | E2E | P0 | 已登录 | 1.选择数据源<br>2.编写SQL<br>3.执行查询 | 结果正确显示 |

## 四、阶段4: 角色演进测试用例

### 4.1 权限升级 (LC-RP-001)

| 用例ID | 测试场景 | 测试类型 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|----------|--------|----------|----------|----------|
| LC-RP-E-001 | 权限升级完整流程 | E2E | P0 | 用户已存在 | 1.编辑用户<br>2.添加角色<br>3.用户重新登录 | 新权限生效 |

### 4.2 权限降级 (LC-RP-002)

| 用例ID | 测试场景 | 测试类型 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|----------|--------|----------|----------|----------|
| LC-RP-E-002 | 权限降级完整流程 | E2E | P0 | 用户有多角色 | 1.编辑用户<br>2.移除角色<br>3.验证权限 | 权限已撤销 |

### 4.3 跨角色隔离 (LC-RP-003)

| 用例ID | 测试场景 | 测试类型 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|----------|--------|----------|----------|----------|
| LC-RP-E-005 | 跨角色权限隔离 | E2E | P0 | 两个不同角色用户 | 1.用户A访问B功能<br>2.验证权限 | 权限隔离正确 |

## 五、阶段5: 离职处理测试用例

### 5.1 正常离职 (LC-OF-001)

| 用例ID | 测试场景 | 测试类型 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|----------|--------|----------|----------|----------|
| LC-OF-E-001 | 正常离职完整流程 | E2E | P0 | 用户已存在 | 1.撤销所有角色<br>2.停用账户<br>3.验证无法登录 | 离职处理完成 |

### 5.2 紧急离职 (LC-OF-002)

| 用例ID | 测试场景 | 测试类型 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|----------|--------|----------|----------|----------|
| LC-OF-E-003 | 紧急停用流程 | E2E | P0 | 用户已存在 | 1.点击紧急停用<br>2.确认停用 | 账户立即停用 |

### 5.3 资源转移 (LC-OF-003)

| 用例ID | 测试场景 | 测试类型 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|----------|--------|----------|----------|----------|
| LC-OF-E-004 | 资源所有权转移 | E2E | P1 | 用户有资源 | 1.选择接手人<br>2.选择资源<br>3.执行转移 | 转移成功 |

### 5.4 用户删除 (LC-OF-004)

| 用例ID | 测试场景 | 测试类型 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|----------|--------|----------|----------|----------|
| LC-OF-E-005 | 用户软删除 | E2E | P1 | 用户已停用 | 1.点击删除<br>2.确认删除 | 用户状态变为deleted |

## 六、完整生命周期测试

| 用例ID | 测试场景 | 测试类型 | 优先级 | 覆盖阶段 | 预期结果 |
|--------|----------|----------|--------|----------|----------|
| LC-FULL-E-001 | 完整入职到离职 | E2E | P0 | 全部 | 1.创建→激活→使用→演进→离职 | 流程完整通过 |

## 七、用例统计

| 角色 | 单元测试 | 集成测试 | E2E测试 | 合计 |
|------|----------|----------|---------|------|
| 系统管理员 | 8 | 3 | 5 | 16 |
| 数据管理员 | 15 | 5 | 5 | 25 |
| 数据工程师 | 12 | 4 | 3 | 19 |
| 算法工程师 | 8 | 3 | 3 | 14 |
| AI 开发者 | 12 | 5 | 5 | 22 |
| 数据分析师 | 12 | 4 | 5 | 21 |
| 业务用户 | 8 | 2 | 3 | 13 |
| 生命周期 | - | 5 | 8 | 13 |
| **合计** | **75** | **31** | **37** | **143** |

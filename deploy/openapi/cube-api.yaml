openapi: 3.0.3
info:
  title: ONE-DATA-STUDIO Cube API
  description: |
    云原生 MLOps 平台 API

    ## 功能概述

    - 模型管理 (CRUD、版本管理)
    - 模型部署与服务
    - 训练任务管理
    - 实验管理
    - 流水线管理
    - 资源监控
    - LLM 微调
    - SQL Lab
    - AI Hub (Hugging Face 集成)

    ## 认证方式

    API 使用 Bearer Token 认证。请在请求头中包含:
    ```
    Authorization: Bearer your-access-token
    ```
  version: 1.0.0
  contact:
    name: ONE-DATA-STUDIO Team
    email: support@one-data.example.com

servers:
  - url: http://localhost:8002
    description: 开发环境
  - url: https://api.example.com/cube
    description: 生产环境

tags:
  - name: Health
    description: 健康检查
  - name: Models
    description: 模型管理
  - name: Deployments
    description: 模型部署
  - name: Predictions
    description: 推理预测
  - name: Training
    description: 训练任务
  - name: Experiments
    description: 实验管理
  - name: Pipelines
    description: 流水线管理
  - name: Resources
    description: 资源管理
  - name: Monitoring
    description: 监控告警
  - name: LLM Tuning
    description: 大模型微调
  - name: SQL Lab
    description: SQL 查询工具
  - name: AI Hub
    description: AI 模型市场

paths:
  /api/v1/health:
    get:
      tags: [Health]
      summary: 健康检查
      operationId: health
      responses:
        '200':
          description: 服务正常
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'

  # ==================== 模型管理 ====================
  /api/v1/models:
    get:
      tags: [Models]
      summary: 获取模型列表
      operationId: listModels
      security:
        - BearerAuth: []
      parameters:
        - name: status
          in: query
          schema:
            type: string
            enum: [draft, ready, archived]
        - name: framework
          in: query
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: page_size
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelListResponse'

    post:
      tags: [Models]
      summary: 创建模型
      operationId: createModel
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateModelRequest'
      responses:
        '201':
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelResponse'

  /api/v1/models/{model_id}:
    get:
      tags: [Models]
      summary: 获取模型详情
      operationId: getModel
      security:
        - BearerAuth: []
      parameters:
        - name: model_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelResponse'
        '404':
          description: 模型不存在

    put:
      tags: [Models]
      summary: 更新模型
      operationId: updateModel
      security:
        - BearerAuth: []
      parameters:
        - name: model_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateModelRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelResponse'

    delete:
      tags: [Models]
      summary: 删除模型
      operationId: deleteModel
      security:
        - BearerAuth: []
      parameters:
        - name: model_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功

  /api/v1/models/{model_id}/versions:
    get:
      tags: [Models]
      summary: 获取模型版本列表
      operationId: listModelVersions
      security:
        - BearerAuth: []
      parameters:
        - name: model_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelVersionListResponse'

    post:
      tags: [Models]
      summary: 创建模型版本
      operationId: createModelVersion
      security:
        - BearerAuth: []
      parameters:
        - name: model_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateModelVersionRequest'
      responses:
        '201':
          description: 创建成功

  # ==================== 模型部署 ====================
  /api/v1/deployments:
    get:
      tags: [Deployments]
      summary: 获取部署列表
      operationId: listDeployments
      security:
        - BearerAuth: []
      parameters:
        - name: status
          in: query
          schema:
            type: string
            enum: [pending, running, stopped, failed]
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentListResponse'

  /api/v1/models/{model_id}/deploy:
    post:
      tags: [Deployments]
      summary: 部署模型
      operationId: deployModel
      security:
        - BearerAuth: []
      parameters:
        - name: model_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeployModelRequest'
      responses:
        '201':
          description: 部署成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentResponse'

  /api/v1/deployments/{deployment_id}:
    delete:
      tags: [Deployments]
      summary: 删除部署
      operationId: deleteDeployment
      security:
        - BearerAuth: []
      parameters:
        - name: deployment_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功

  # ==================== 推理预测 ====================
  /api/v1/predict/{deployment_id}:
    post:
      tags: [Predictions]
      summary: 模型推理
      operationId: predict
      security:
        - BearerAuth: []
      parameters:
        - name: deployment_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PredictRequest'
      responses:
        '200':
          description: 推理成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PredictResponse'

  /api/v1/batch-predictions:
    post:
      tags: [Predictions]
      summary: 批量预测
      operationId: batchPredict
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BatchPredictRequest'
      responses:
        '202':
          description: 任务已提交
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BatchPredictResponse'

  /api/v1/batch-predictions/{job_id}:
    get:
      tags: [Predictions]
      summary: 获取批量预测状态
      operationId: getBatchPrediction
      security:
        - BearerAuth: []
      parameters:
        - name: job_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 成功

  # ==================== 训练任务 ====================
  /api/v1/training-jobs:
    get:
      tags: [Training]
      summary: 获取训练任务列表
      operationId: listTrainingJobs
      security:
        - BearerAuth: []
      parameters:
        - name: status
          in: query
          schema:
            type: string
            enum: [pending, running, completed, failed, cancelled]
        - name: page
          in: query
          schema:
            type: integer
            default: 1
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TrainingJobListResponse'

    post:
      tags: [Training]
      summary: 创建训练任务
      operationId: createTrainingJob
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTrainingJobRequest'
      responses:
        '201':
          description: 创建成功

  /api/v1/training-jobs/{job_id}:
    get:
      tags: [Training]
      summary: 获取训练任务详情
      operationId: getTrainingJob
      security:
        - BearerAuth: []
      parameters:
        - name: job_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 成功

  /api/v1/training-jobs/{job_id}/cancel:
    post:
      tags: [Training]
      summary: 取消训练任务
      operationId: cancelTrainingJob
      security:
        - BearerAuth: []
      parameters:
        - name: job_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 取消成功

  # ==================== 实验管理 ====================
  /api/v1/experiments:
    get:
      tags: [Experiments]
      summary: 获取实验列表
      operationId: listExperiments
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 成功

    post:
      tags: [Experiments]
      summary: 创建实验
      operationId: createExperiment
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateExperimentRequest'
      responses:
        '201':
          description: 创建成功

  /api/v1/experiments/{experiment_id}:
    get:
      tags: [Experiments]
      summary: 获取实验详情
      operationId: getExperiment
      security:
        - BearerAuth: []
      parameters:
        - name: experiment_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 成功

    put:
      tags: [Experiments]
      summary: 更新实验
      operationId: updateExperiment
      security:
        - BearerAuth: []
      parameters:
        - name: experiment_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateExperimentRequest'
      responses:
        '200':
          description: 更新成功

    delete:
      tags: [Experiments]
      summary: 删除实验
      operationId: deleteExperiment
      security:
        - BearerAuth: []
      parameters:
        - name: experiment_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功

  /api/v1/experiments/{experiment_id}/stop:
    post:
      tags: [Experiments]
      summary: 停止实验
      operationId: stopExperiment
      security:
        - BearerAuth: []
      parameters:
        - name: experiment_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 停止成功

  /api/v1/experiments/compare:
    get:
      tags: [Experiments]
      summary: 对比实验
      operationId: compareExperiments
      security:
        - BearerAuth: []
      parameters:
        - name: ids
          in: query
          required: true
          schema:
            type: string
            description: 逗号分隔的实验 ID 列表
      responses:
        '200':
          description: 成功

  # ==================== 流水线管理 ====================
  /api/v1/pipelines:
    get:
      tags: [Pipelines]
      summary: 获取流水线列表
      operationId: listPipelines
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 成功

    post:
      tags: [Pipelines]
      summary: 创建流水线
      operationId: createPipeline
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePipelineRequest'
      responses:
        '201':
          description: 创建成功

  /api/v1/pipelines/{pipeline_id}:
    get:
      tags: [Pipelines]
      summary: 获取流水线详情
      operationId: getPipeline
      security:
        - BearerAuth: []
      parameters:
        - name: pipeline_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 成功

    put:
      tags: [Pipelines]
      summary: 更新流水线
      operationId: updatePipeline
      security:
        - BearerAuth: []
      parameters:
        - name: pipeline_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePipelineRequest'
      responses:
        '200':
          description: 更新成功

    delete:
      tags: [Pipelines]
      summary: 删除流水线
      operationId: deletePipeline
      security:
        - BearerAuth: []
      parameters:
        - name: pipeline_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功

  /api/v1/pipelines/{pipeline_id}/execute:
    post:
      tags: [Pipelines]
      summary: 执行流水线
      operationId: executePipeline
      security:
        - BearerAuth: []
      parameters:
        - name: pipeline_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExecutePipelineRequest'
      responses:
        '202':
          description: 执行已启动

  /api/v1/pipelines/{pipeline_id}/executions:
    get:
      tags: [Pipelines]
      summary: 获取流水线执行历史
      operationId: listPipelineExecutions
      security:
        - BearerAuth: []
      parameters:
        - name: pipeline_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 成功

  /api/v1/pipeline-templates:
    get:
      tags: [Pipelines]
      summary: 获取流水线模板列表
      operationId: listPipelineTemplates
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 成功

  # ==================== 资源管理 ====================
  /api/v1/resources/overview:
    get:
      tags: [Resources]
      summary: 获取资源概览
      operationId: getResourceOverview
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResourceOverviewResponse'

  /api/v1/resources/gpu:
    get:
      tags: [Resources]
      summary: 获取 GPU 资源列表
      operationId: listGPUResources
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 成功

  /api/v1/resources/pools:
    get:
      tags: [Resources]
      summary: 获取资源池列表
      operationId: listResourcePools
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 成功

  /api/v1/resources/usage:
    get:
      tags: [Resources]
      summary: 获取资源使用情况
      operationId: getResourceUsage
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 成功

  # ==================== 监控告警 ====================
  /api/v1/monitoring/metrics:
    get:
      tags: [Monitoring]
      summary: 获取监控指标
      operationId: getMetrics
      security:
        - BearerAuth: []
      parameters:
        - name: metric_names
          in: query
          schema:
            type: string
        - name: start_time
          in: query
          schema:
            type: string
            format: date-time
        - name: end_time
          in: query
          schema:
            type: string
            format: date-time
      responses:
        '200':
          description: 成功

  /api/v1/monitoring/dashboards:
    get:
      tags: [Monitoring]
      summary: 获取仪表板列表
      operationId: listDashboards
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 成功

    post:
      tags: [Monitoring]
      summary: 创建仪表板
      operationId: createDashboard
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDashboardRequest'
      responses:
        '201':
          description: 创建成功

  /api/v1/monitoring/alert-rules:
    get:
      tags: [Monitoring]
      summary: 获取告警规则列表
      operationId: listAlertRules
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 成功

    post:
      tags: [Monitoring]
      summary: 创建告警规则
      operationId: createAlertRule
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAlertRuleRequest'
      responses:
        '201':
          description: 创建成功

  /api/v1/monitoring/notifications:
    get:
      tags: [Monitoring]
      summary: 获取告警通知列表
      operationId: listNotifications
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 成功

  # ==================== LLM 微调 ====================
  /api/v1/llm-tuning/tasks:
    get:
      tags: [LLM Tuning]
      summary: 获取微调任务列表
      operationId: listLLMTuningTasks
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 成功

    post:
      tags: [LLM Tuning]
      summary: 创建微调任务
      operationId: createLLMTuningTask
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateLLMTuningTaskRequest'
      responses:
        '201':
          description: 创建成功

  /api/v1/llm-tuning/tasks/{task_id}:
    get:
      tags: [LLM Tuning]
      summary: 获取微调任务详情
      operationId: getLLMTuningTask
      security:
        - BearerAuth: []
      parameters:
        - name: task_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 成功

    put:
      tags: [LLM Tuning]
      summary: 更新微调任务
      operationId: updateLLMTuningTask
      security:
        - BearerAuth: []
      parameters:
        - name: task_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateLLMTuningTaskRequest'
      responses:
        '200':
          description: 更新成功

    delete:
      tags: [LLM Tuning]
      summary: 删除微调任务
      operationId: deleteLLMTuningTask
      security:
        - BearerAuth: []
      parameters:
        - name: task_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功

  /api/v1/llm-tuning/tasks/{task_id}/start:
    post:
      tags: [LLM Tuning]
      summary: 启动微调任务
      operationId: startLLMTuningTask
      security:
        - BearerAuth: []
      parameters:
        - name: task_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 启动成功

  /api/v1/llm-tuning/tasks/{task_id}/stop:
    post:
      tags: [LLM Tuning]
      summary: 停止微调任务
      operationId: stopLLMTuningTask
      security:
        - BearerAuth: []
      parameters:
        - name: task_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 停止成功

  /api/v1/llm-tuning/methods:
    get:
      tags: [LLM Tuning]
      summary: 获取支持的微调方法
      operationId: listLLMTuningMethods
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 成功

  # ==================== SQL Lab ====================
  /api/v1/sql-lab/execute:
    post:
      tags: [SQL Lab]
      summary: 执行 SQL 查询
      operationId: executeSql
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExecuteSqlRequest'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SqlResultResponse'

  /api/v1/sql-lab/history:
    get:
      tags: [SQL Lab]
      summary: 获取查询历史
      operationId: getSqlHistory
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 成功

  /api/v1/sql-lab/saved-queries:
    get:
      tags: [SQL Lab]
      summary: 获取保存的查询列表
      operationId: listSavedQueries
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 成功

    post:
      tags: [SQL Lab]
      summary: 保存查询
      operationId: saveQuery
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SaveQueryRequest'
      responses:
        '201':
          description: 保存成功

  /api/v1/sql-lab/databases:
    get:
      tags: [SQL Lab]
      summary: 获取数据库连接列表
      operationId: listDatabases
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 成功

  # ==================== AI Hub ====================
  /api/v1/huggingface/models:
    get:
      tags: [AI Hub]
      summary: 搜索 Hugging Face 模型
      operationId: searchHuggingFaceModels
      security:
        - BearerAuth: []
      parameters:
        - name: search
          in: query
          schema:
            type: string
        - name: filter
          in: query
          schema:
            type: string
        - name: sort
          in: query
          schema:
            type: string
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: 成功

  /api/v1/huggingface/models/{model_id}:
    get:
      tags: [AI Hub]
      summary: 获取 Hugging Face 模型详情
      operationId: getHuggingFaceModel
      security:
        - BearerAuth: []
      parameters:
        - name: model_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 成功

  /api/v1/huggingface/models/{model_id}/import:
    post:
      tags: [AI Hub]
      summary: 导入 Hugging Face 模型
      operationId: importHuggingFaceModel
      security:
        - BearerAuth: []
      parameters:
        - name: model_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '202':
          description: 导入任务已提交

  /api/v1/aihub/models:
    get:
      tags: [AI Hub]
      summary: 获取 AI Hub 模型列表
      operationId: listAIHubModels
      security:
        - BearerAuth: []
      parameters:
        - name: search
          in: query
          schema:
            type: string
        - name: category
          in: query
          schema:
            type: string
        - name: task
          in: query
          schema:
            type: string
      responses:
        '200':
          description: 成功

  /api/v1/aihub/categories:
    get:
      tags: [AI Hub]
      summary: 获取模型分类
      operationId: getAIHubCategories
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 成功

  /api/v1/aihub/trending:
    get:
      tags: [AI Hub]
      summary: 获取热门模型
      operationId: getTrendingModels
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 成功

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    HealthResponse:
      type: object
      properties:
        status:
          type: string
          example: ok
        service:
          type: string
          example: cube-api
        version:
          type: string
          example: 1.0.0

    ModelListResponse:
      type: object
      properties:
        code:
          type: integer
          example: 0
        message:
          type: string
          example: success
        data:
          type: object
          properties:
            models:
              type: array
              items:
                $ref: '#/components/schemas/Model'
            total:
              type: integer

    Model:
      type: object
      properties:
        model_id:
          type: string
        name:
          type: string
        framework:
          type: string
          enum: [pytorch, tensorflow, sklearn, xgboost, onnx]
        status:
          type: string
          enum: [draft, ready, archived]
        created_at:
          type: string
          format: date-time

    ModelResponse:
      type: object
      properties:
        code:
          type: integer
        message:
          type: string
        data:
          $ref: '#/components/schemas/Model'

    CreateModelRequest:
      type: object
      required: [name, framework]
      properties:
        name:
          type: string
        description:
          type: string
        framework:
          type: string
          enum: [pytorch, tensorflow, sklearn, xgboost, onnx]
        tags:
          type: array
          items:
            type: string

    UpdateModelRequest:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        status:
          type: string
        tags:
          type: array
          items:
            type: string

    ModelVersionListResponse:
      type: object
      properties:
        code:
          type: integer
        data:
          type: object
          properties:
            versions:
              type: array
              items:
                type: object

    CreateModelVersionRequest:
      type: object
      required: [version, artifact_path]
      properties:
        version:
          type: string
        artifact_path:
          type: string
        description:
          type: string

    DeploymentListResponse:
      type: object
      properties:
        code:
          type: integer
        data:
          type: object
          properties:
            deployments:
              type: array
              items:
                type: object

    DeployModelRequest:
      type: object
      properties:
        version:
          type: string
        replicas:
          type: integer
          default: 1
        resources:
          type: object
          properties:
            cpu:
              type: string
            memory:
              type: string
            gpu:
              type: integer

    DeploymentResponse:
      type: object
      properties:
        code:
          type: integer
        data:
          type: object
          properties:
            deployment_id:
              type: string
            endpoint:
              type: string

    PredictRequest:
      type: object
      required: [input]
      properties:
        input:
          type: object
        parameters:
          type: object

    PredictResponse:
      type: object
      properties:
        code:
          type: integer
        data:
          type: object
          properties:
            predictions:
              type: array
              items:
                type: object

    BatchPredictRequest:
      type: object
      required: [deployment_id, inputs]
      properties:
        deployment_id:
          type: string
        inputs:
          type: array
          items:
            type: object

    BatchPredictResponse:
      type: object
      properties:
        code:
          type: integer
        data:
          type: object
          properties:
            job_id:
              type: string

    TrainingJobListResponse:
      type: object
      properties:
        code:
          type: integer
        data:
          type: object
          properties:
            jobs:
              type: array
              items:
                type: object

    CreateTrainingJobRequest:
      type: object
      required: [name, model_id]
      properties:
        name:
          type: string
        model_id:
          type: string
        dataset_id:
          type: string
        hyperparameters:
          type: object
        resources:
          type: object

    CreateExperimentRequest:
      type: object
      required: [name]
      properties:
        name:
          type: string
        description:
          type: string
        tags:
          type: array
          items:
            type: string

    UpdateExperimentRequest:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        status:
          type: string

    CreatePipelineRequest:
      type: object
      required: [name]
      properties:
        name:
          type: string
        description:
          type: string
        definition:
          type: object

    UpdatePipelineRequest:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        definition:
          type: object

    ExecutePipelineRequest:
      type: object
      properties:
        parameters:
          type: object

    ResourceOverviewResponse:
      type: object
      properties:
        code:
          type: integer
        data:
          type: object
          properties:
            cpu:
              type: object
            memory:
              type: object
            gpu:
              type: object

    CreateDashboardRequest:
      type: object
      required: [name]
      properties:
        name:
          type: string
        description:
          type: string
        panels:
          type: array
          items:
            type: object

    CreateAlertRuleRequest:
      type: object
      required: [name, condition]
      properties:
        name:
          type: string
        condition:
          type: string
        threshold:
          type: number
        severity:
          type: string
          enum: [info, warning, critical]

    CreateLLMTuningTaskRequest:
      type: object
      required: [name, base_model]
      properties:
        name:
          type: string
        base_model:
          type: string
        method:
          type: string
          enum: [full, lora, qlora, prefix]
        dataset_id:
          type: string
        hyperparameters:
          type: object

    UpdateLLMTuningTaskRequest:
      type: object
      properties:
        name:
          type: string
        hyperparameters:
          type: object

    ExecuteSqlRequest:
      type: object
      required: [sql, database]
      properties:
        sql:
          type: string
        database:
          type: string
        limit:
          type: integer
          default: 1000

    SqlResultResponse:
      type: object
      properties:
        code:
          type: integer
        data:
          type: object
          properties:
            columns:
              type: array
              items:
                type: string
            rows:
              type: array
              items:
                type: array
            row_count:
              type: integer

    SaveQueryRequest:
      type: object
      required: [name, sql, database]
      properties:
        name:
          type: string
        description:
          type: string
        sql:
          type: string
        database:
          type: string

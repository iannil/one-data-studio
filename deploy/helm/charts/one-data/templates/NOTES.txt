{{/*
Validate all credentials before showing deployment notes
This ensures the deployment fails early if credentials are missing
*/}}
{{- include "one-data.validateAllCredentials" . }}

ONE-DATA-STUDIO has been deployed!

Environment: {{ .Values.global.environment }}
Release: {{ .Release.Name }}

=============================================================================
IMPORTANT: Post-Installation Steps
=============================================================================

{{- if .Values.infrastructure.minio.enabled }}
1. MinIO Object Storage:
   - Endpoint: http://minio.{{ .Release.Namespace }}.svc.cluster.local:9000
   - Console: http://minio.{{ .Release.Namespace }}.svc.cluster.local:9001
   - Credentials: Configured via values
{{- end }}

{{- if .Values.infrastructure.mysql.enabled }}
2. MySQL Database:
   - Host: mysql.{{ .Release.Namespace }}.svc.cluster.local
   - Port: 3306
   - Database: {{ .Values.infrastructure.mysql.database.name }}
{{- end }}

{{- if .Values.infrastructure.redis.enabled }}
3. Redis Cache:
   - Host: redis.{{ .Release.Namespace }}.svc.cluster.local
   - Port: 6379
{{- end }}

{{- if .Values.data.enabled }}
4. Data API:
   - Internal: http://data-api.{{ .Values.data.namespace }}.svc.cluster.local:{{ .Values.data.service.port }}
   {{- if .Values.data.ingress.enabled }}
   - External: {{ if .Values.data.ingress.tls }}https{{ else }}http{{ end }}://{{ .Values.data.ingress.host }}
   {{- end }}
{{- end }}

{{- if .Values.agent.enabled }}
5. Agent API:
   - Internal: http://agent-api.{{ .Values.agent.namespace }}.svc.cluster.local:{{ .Values.agent.service.port }}
   {{- if .Values.agent.ingress.enabled }}
   - External: {{ if .Values.agent.ingress.tls }}https{{ else }}http{{ end }}://{{ .Values.agent.ingress.host }}
   {{- end }}
{{- end }}

{{- if .Values.model.enabled }}
6. Model Serving:
   - Internal: http://vllm-serving.{{ .Values.model.namespace }}.svc.cluster.local:{{ .Values.model.modelServing.service.port }}
   {{- if .Values.model.modelServing.ingress.enabled }}
   - External: {{ if .Values.model.modelServing.ingress.tls }}https{{ else }}http{{ end }}://{{ .Values.model.modelServing.ingress.host }}
   {{- end }}
{{- end }}

=============================================================================
SECURITY REMINDERS
=============================================================================

{{- if not (include "one-data.isProduction" .) }}
WARNING: Running in {{ .Values.global.environment }} mode.
For production deployment:
- Set global.environment to "production"
- Enable TLS on all ingress resources
- Use strong, unique passwords for all services
- Configure proper resource limits
- Enable monitoring and alerting
{{- end }}

{{- if and .Values.data.ingress.enabled (not .Values.data.ingress.tls) }}
WARNING: Data API ingress TLS is disabled. Enable for production!
{{- end }}

{{- if and .Values.agent.ingress.enabled (not .Values.agent.ingress.tls) }}
WARNING: Agent API ingress TLS is disabled. Enable for production!
{{- end }}

{{- if and .Values.model.modelServing.ingress.enabled (not .Values.model.modelServing.ingress.tls) }}
WARNING: Model Serving ingress TLS is disabled. Enable for production!
{{- end }}

For more information, visit: https://github.com/one-data-studio

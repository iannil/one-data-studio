# Secret Store Configuration
# Sprint 21: Security Hardening
#
# This file configures the connection to the external secret management system.
# Uncomment and configure the appropriate backend for your environment.

---
# Option 1: AWS Secrets Manager
apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: aws-secrets-manager
  namespace: one-data-system
spec:
  provider:
    aws:
      service: SecretsManager
      region: us-west-2
      auth:
        jwt:
          serviceAccountRef:
            name: external-secrets-sa

---
# Option 2: HashiCorp Vault
# apiVersion: external-secrets.io/v1beta1
# kind: SecretStore
# metadata:
#   name: vault-backend
#   namespace: one-data-system
# spec:
#   provider:
#     vault:
#       server: "https://vault.example.com"
#       path: "secret"
#       version: "v2"
#       auth:
#         kubernetes:
#           mountPath: "kubernetes"
#           role: "one-data-studio"
#           serviceAccountRef:
#             name: external-secrets-sa

---
# Option 3: Google Secret Manager
# apiVersion: external-secrets.io/v1beta1
# kind: SecretStore
# metadata:
#   name: gcp-secret-manager
#   namespace: one-data-system
# spec:
#   provider:
#     gcpsm:
#       projectID: your-project-id
#       auth:
#         workloadIdentity:
#           clusterLocation: us-central1
#           clusterName: one-data-cluster
#           serviceAccountRef:
#             name: external-secrets-sa

---
# ClusterSecretStore for cluster-wide access
apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: one-data-secrets
spec:
  provider:
    aws:
      service: SecretsManager
      region: us-west-2
      auth:
        jwt:
          serviceAccountRef:
            name: external-secrets-sa
            namespace: external-secrets

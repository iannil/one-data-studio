{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://one-data-studio/workflows/rag_simple.json",
  "title": "RAG 工作流模板",
  "description": "简单的检索增强生成工作流，包含文档检索和 LLM 生成",
  "version": "1.0",
  "nodes": [
    {
      "id": "input",
      "type": "input",
      "name": "用户输入",
      "config": {
        "key": "query"
      }
    },
    {
      "id": "retriever",
      "type": "retriever",
      "name": "向量检索",
      "config": {
        "collection": "documents",
        "top_k": 5,
        "query_from": "input"
      }
    },
    {
      "id": "llm",
      "type": "llm",
      "name": "大模型生成",
      "config": {
        "model": "gpt-4o-mini",
        "temperature": 0.7,
        "max_tokens": 2000,
        "system_prompt": "你是一个基于检索增强生成（RAG）的智能助手。请根据提供的上下文回答用户问题。",
        "input_from": "retriever.documents"
      }
    },
    {
      "id": "output",
      "type": "output",
      "name": "输出结果",
      "config": {
        "output_key": "result",
        "input_from": "llm.output"
      }
    }
  ],
  "edges": [
    {
      "source": "input",
      "target": "retriever"
    },
    {
      "source": "retriever",
      "target": "llm"
    },
    {
      "source": "llm",
      "target": "output"
    }
  ]
}
